{# Copyright The IETF Trust 2015, All Rights Reserved #}
{% load origin %}
{% origin %}
{% load ietf_filters %}
{% load proceedings_filters %}
{% with name=sessions.0.name group=sessions.0.group first_session=sessions.0 %}
<tr>
    <td>
        {% if name %}
            <div id="{{ name|slugify }}">{{ name }}</div>
        {% elif group.acronym %}
            <div id="{{ group.acronym }}">
                <a href="{% url 'ietf.group.views.group_home' acronym=group.acronym %}">{{ group.acronym }}</a>
            </div>
            {% if group.state_id == "bof" %}<span class="badge rounded-pill bg-success">BOF</span>{% endif %}
        {% else %}
            <h1>{{group}}</h1>
        {% endif %}
    </td>
    {% if first_session.all_meeting_sessions_cancelled %}
        <td colspan="4">
            <span class="badge rounded-pill bg-danger">Session cancelled</span>
        </td>
    {% else %}
        {# artifacts #}
        <td>
            {# todo label for multiple sessions[DONE], warnings when items not yet posted #}
            {% for session in sessions %}
                {% if session.agenda %}
                    <a href="{{ session.agenda|meeting_href:meeting }}">
                        Agenda
                        {% if sessions|length > 1 %}
                            {{session.official_timeslotassignment.timeslot.time|date:"D G:i"}}
                      {% endif %}
                    </a>
                    <br>
                {% endif %}
            {% endfor %}
            {% for session in sessions %}
                {% if session.minutes %}
                    <a href="{{ session.minutes|meeting_href:meeting }}">
                        Minutes
                        {% if sessions|length > 1 %}
                            {{session.official_timeslotassignment.timeslot.time|date:"D G:i"}}
                        {% endif %}
                    </a>
                    <br>
                {% endif %}
            {% endfor %}
            {% for session in sessions %}
                {% if session.bluesheets %}
                    {% for bs in session.bluesheets %}
                        <a href="{{ bs|meeting_href:meeting }}">
                            Bluesheets
                            {% if sessions|length > 1 %}
                                {{ session.official_timeslotassignment.timeslot.time|date:"D G:i" }}
                            {% endif %}
                        </a>
                        <br>
                    {% endfor %}
                {% endif %}
            {% endfor %}
        </td>
        {# recordings #}
        <td>
          {% for session in sessions %}
              {% for rec in session.recordings %}
                  <a href="{{ rec|meeting_href:meeting|default:"#" }}">
                      {% if sessions|length > 1 %}
                          {{ rec|hack_recording_title:True }}
                      {% else %}
                          {{ rec|hack_recording_title:False }}
                      {% endif %}
                  </a>
                  <br>
              {% endfor %}
          {% endfor %}
        </td>
        {# slides #}
        <td>
            {% for session in sessions %}
                {% for slide in session.slides %}
                    <a href="{{ slide|meeting_href:meeting }}">{{ slide.title|clean_whitespace }}</a>
                    <br>
                {% empty %}
                    {% if not meeting.proceedings_final %}<span class="badge rounded-pill bg-warning">No slides</span>{% endif %}
                {% endfor %}
            {% endfor %}
        </td>
        {# drafts #}
        <td>
            {% for session in sessions %}
                {% for draft in session.drafts %}
                    <a href="{% url "ietf.doc.views_doc.document_main" name=draft.canonical_name %}">{{ draft.canonical_name }}</a>
                    <br>
                {% empty %}
                    {% if not meeting.proceedings_final %}<span class="badge rounded-pill bg-warning">No drafts</span>{% endif %}
                {% endfor %}
            {% endfor %}
        </td>
    {% endif %}
{% comment %}
<!--            {% if session.name %}-->
<!--                {% if session.agenda %}-->
<!--                    <a href="{{ session.agenda|meeting_href:meeting }}">Agenda</a>-->
<!--                    <br>-->
<!--                {% endif %}-->
<!--            {% elif session.all_meeting_agendas %}-->
<!--                {% if session.all_meeting_agendas|length == 1 %}-->
<!--                    <a href="{{ session.all_meeting_agendas.0|meeting_href:meeting }}">Agenda</a>-->
<!--                    <br>-->
<!--                {% else %}-->
<!--                    {% for agenda in session.all_meeting_agendas %}-->
<!--                        <a href="{{ agenda|meeting_href:meeting }}">-->
<!--                            Agenda {{ agenda.sessionpresentation_set.first.session.official_timeslotassignment.timeslot.time|date:"D G:i" }}-->
<!--                        </a>-->
<!--                        <br>-->
<!--                    {% endfor %}-->
<!--                {% endif %}-->
<!--            {% else %}-->
<!--                {% if show_agenda == "True" and not meeting.proceedings_final %}-->
<!--                    <span class="badge rounded-pill bg-warning">No agenda</span>-->
<!--                    <br>-->
<!--                {% endif %}-->
<!--            {% endif %}-->
<!--            {% if session.all_meeting_minutes %}-->
<!--                {% if session.all_meeting_minutes|length == 1 %}-->
<!--                    <a href="{{ session.all_meeting_minutes.0|meeting_href:meeting }}">Minutes</a>-->
<!--                    <br>-->
<!--                {% else %}-->
<!--                    {% for minutes in session.all_meeting_minutes %}-->
<!--                        <a href="{{ minutes|meeting_href:meeting }}">-->
<!--                            Minutes {{ minutes.sessionpresentation_set.first.session.official_timeslotassignment.timeslot.time|date:"D G:i" }}-->
<!--                        </a>-->
<!--                        <br>-->
<!--                    {% endfor %}-->
<!--                {% endif %}-->
<!--            {% else %}-->
<!--                {% if show_agenda == "True" and not meeting.proceedings_final %}-->
<!--                    <span class="badge rounded-pill bg-warning">No minutes</span>-->
<!--                    <br>-->
<!--                {% endif %}-->
<!--            {% endif %}-->
<!--            {% if session.all_meeting_bluesheets %}-->
<!--                {% if session.all_meeting_bluesheets|length == 1 %}-->
<!--                    <a href="{{ session.all_meeting_bluesheets.0|meeting_href:meeting }}">Bluesheets</a>-->
<!--                    <br>-->
<!--                {% else %}-->
<!--                    {% for bs in session.all_meeting_bluesheets %}-->
<!--                        <a href="{{ bs|meeting_href:meeting }}">-->
<!--                            Bluesheets {{ bs.sessionpresentation_set.first.session.official_timeslotassignment.timeslot.time|date:"D G:i" }}-->
<!--                        </a>-->
<!--                        <br>-->
<!--                    {% endfor %}-->
<!--                {% endif %}-->
<!--            {% endif %}-->
<!--            {% with session.group|status_for_meeting:meeting as status %}-->
<!--                {% if status %}-->
<!--                    <a href="{% url 'ietf.group.views.group_about_status_meeting' acronym=session.group.acronym num=meeting.number %}">-->
<!--                        Status-->
<!--                    </a>-->
<!--                    <br>-->
<!--                {% endif %}-->
<!--            {% endwith %}-->
<!--        </td>-->
<!--        {# recordings #}-->
<!--        <td>-->
<!--            {% if session.name %}-->
<!--                {% for rec in session.recordings %}-->
<!--                    <a href="{{ rec|meeting_href:meeting|default:"#" }}">{{ rec|hack_recording_title:False }}</a>-->
<!--                    <br>-->
<!--                {% endfor %}-->
<!--            {% else %}-->
<!--                {% if session.all_meeting_sessions_for_group|length == 1 %}-->
<!--                    {% for rec in session.all_meeting_recordings %}-->
<!--                        <a href="{{ rec|meeting_href:meeting|default:"#" }}">{{ rec|hack_recording_title:False }}</a>-->
<!--                        <br>-->
<!--                    {% endfor %}-->
<!--                {% else %}-->
<!--                    {% for rec in session.all_meeting_recordings %}-->
<!--                        <a href="{{ rec|meeting_href:meeting|default:"#" }}">{{ rec|hack_recording_title:True }}</a>-->
<!--                        <br>-->
<!--                    {% endfor %}-->
<!--                {% endif %}-->
<!--            {% endif %}-->
<!--        </td>-->
<!--        {# slides #}-->
<!--        <td>-->
<!--            {% if session.name %}-->
<!--                {% for slide in session.slides %}-->
<!--                    <a href="{{ slide|meeting_href:meeting }}">{{ slide.title|clean_whitespace }}</a>-->
<!--                    <br>-->
<!--                {% empty %}-->
<!--                    {% if not meeting.proceedings_final %}<span class="badge rounded-pill bg-warning">No slides</span>{% endif %}-->
<!--                {% endfor %}-->
<!--            {% else %}-->
<!--                {% with session.all_meeting_slides as slides %}-->
<!--                    {% for slide in slides %}-->
<!--                        <a href="{{ slide|meeting_href:meeting }}">{{ slide.title|clean_whitespace }}</a>-->
<!--                        <br>-->
<!--                    {% empty %}-->
<!--                        {% if not meeting.proceedings_final %}<span class="badge rounded-pill bg-warning">No slides</span>{% endif %}-->
<!--                    {% endfor %}-->
<!--                {% endwith %}-->
<!--            {% endif %}-->
<!--        </td>-->
<!--        {# drafts #}-->
<!--        <td>-->
<!--            {% if session.name %}-->
<!--                {% for draft in session.drafts %}-->
<!--                    <a href="{% url "ietf.doc.views_doc.document_main" name=draft.canonical_name %}">{{ draft.canonical_name }}</a>-->
<!--                    <br>-->
<!--                {% empty %}-->
<!--                    {% if not meeting.proceedings_final %}<span class="badge rounded-pill bg-warning">No drafts</span>{% endif %}-->
<!--                {% endfor %}-->
<!--            {% else %}-->
<!--                {% with session.all_meeting_drafts as drafts %}-->
<!--                    {% for draft in drafts %}-->
<!--                        <a href="{% url "ietf.doc.views_doc.document_main" name=draft.canonical_name %}">{{ draft.canonical_name }}</a>-->
<!--                        <br>-->
<!--                    {% empty %}-->
<!--                        {% if not meeting.proceedings_final %}<span class="badge rounded-pill bg-warning">No drafts</span>{% endif %}-->
<!--                    {% endfor %}-->
<!--                {% endwith %}-->
<!--            {% endif %}-->
<!--        </td>-->
<!--    {% endif %}-->
{% endcomment %}
</tr>
{% endwith %}