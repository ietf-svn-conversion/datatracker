{% extends "base.html" %}
{# Copyright The IETF Trust 2015, All Rights Reserved #}
{% load origin static %}
{% load ietf_filters %}
{% block pagehead %}
    <link rel="stylesheet" href="{% static "ietf/css/list.css" %}">
{% endblock %}
{% block title %}IESG Dashboard{% endblock %}
{% block content %}
    {% origin %}
    <h1>IESG Dashboard</h1>
    {% if user|has_role:"Area Director,Secretariat" %}
    <div class="alert alert-info my-3">
        {{ delta.days }}-day trend indicators
        are only shown to logged-in Area Directors.
    </div>
    {% endif %}
    {% for type in workload %}
        <h2 class="mt-5" id="{{ type.doc_type|slugify }}">{{ type.doc_type }} State Counts</h2>
        <table class="table table-sm table-striped table-bordered tablesorter">
            <thead class="wrap-anywhere">
                <tr>
                    <th scope="col" data-sort="name">Area Director</th>
                    {% for state in type.state_names %}
                        <th scope="col" class="col-1" title=""
                            data-sort="{{ state|slugify }}-num">
                            {{ state|split:'/'|join:'/<wbr>' }}
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody class="table-group-divider">
                {% for ad, ad_data in type.counts %}
                    <tr>
                        <td>
                            <a href="{{ ad.dashboard }}">{{ ad.name }}</a>
                        </td>
                        {% for label, up_is_good, count, prev, docs_delta in ad_data %}
                        <td class="col-1"
                            id="{{ type.doc_type|slugify }}-{{ ad.full_name_as_key|slugify }}-{{ label|slugify }}">
                            {% include 'doc/ad_count.html' %}
                        </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot class="table-group-divider">
                <tr>
                    <th scope="row">Sum</th>
                    {% for label, up_is_good, count, prev in type.sums %}
                        <td>
                            {% include 'doc/ad_count.html' %}
                        </td>
                    {% endfor %}
                </tr>
            </tfoot>
        </table>
    {% endfor %}
{% endblock %}
{% block js %}
    <script src="{% static "ietf/js/list.js" %}"></script>
    <script>
        $(document)
            .ready(function () {
                $("[data-bs-toggle='popover']")
                    .popover({
                        html: true,
                        trigger: "hover focus click"
                    });
            });
    </script>
{% endblock %}