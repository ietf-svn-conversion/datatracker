{% extends "base.html" %}
{# Copyright The IETF Trust 2015, All Rights Reserved #}
{% load origin textfilters ietf_filters static %}
{% block title %}Active areas{% endblock %}
{% block content %}
    {% origin %}
    <h1>Areas</h1>
    <p>
        The IETF divides its work into a number of areas, each comprised of working groups that relate to that area's focus. The area structure is defined by the IESG, and the IESG can add areas, redefine areas, merge areas, change the number of ADs assigned to an area, or close down areas.
    </p>
    <p>
        Changes to the area structure affect the IETF in many ways; decisions to change the area structure are taken in consultation with the community.
    </p>
    <p>
        When changing the area structure, the IESG can decide which members are responsible for new and changed areas, including making one sitting AD responsible for multiple areas, but the IESG can only add new members through the
        <a href="https://www.ietf.org/nomcom/index.html">NomCom process</a>.
    </p>
    <p>
        The primary task of area management is handled by one or two Area Directors per area. An AD may be advised by one or more directorates, which are created, selected, chaired and if necessary disbanded by the AD. Directorates may be specific to an area, specific to a technology, or chartered in some other fashion.
    </p>
    <p>
        The ADs for an area are jointly responsible for making sure the WGs in the area are well coordinated, that there is coverage for the technologies needed in the area, and that the challenges most important to the Internet in that area are indeed being worked on.
    </p>
    <p>
        For more information about the role of the IESG in areas and working groups, please see
        <a href="https://www.ietf.org/rfc/rfc3710.txt">RFC 3710 ("An IESG charter")</a>,
        Section 6 and
        <a href="https://www.ietf.org/rfc/rfc2418.txt">RFC 2418 ("IETF Working Group Guidelines and Procedures")</a>.
    </p>
    <p>
        A full list of active working groups, sorted by area, may be found at
        <a href="{% url 'ietf.group.views.active_groups' group_type='wg' %}">
            {% url 'ietf.group.views.active_groups' group_type='wg' %}
        </a>.
    </p>
    <p>
        The IESG decides which areas working groups belong to. The charter of each area is listed below:
    </p>
    <ul>
        {% for area in areas %}
            <li>
                <a href="#id-{{ area.acronym|slugify }}">{{ area.acronym|upper }} â€“ {{ area.name }}</a>
            </li>
        {% endfor %}
    </ul>
    <div class="row mt-3">
        <div class="col-sm chart text-center" id="docs">
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        <div class="col-sm chart text-center" id="pages">
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
    {% for area in areas %}
        <h2 class="mt-3" id="id-{{ area.acronym|slugify }}">
            {{ area.name }}
            <a href="{% url 'ietf.group.views.active_groups' group_type='wg' %}#{{ area.acronym }}">({{ area.acronym|upper }})</a>
        </h2>
        {% if area.description %}
            <p>
                {{ area.description|urlize_ietf_docs|linkify|safe }}
            </p>
        {% endif %}
    {% endfor %}
{% endblock %}
{% block js %}
    <script src="{% static 'ietf/js/highcharts.js' %}"></script>
    <script>
        $(function () {
            $.getJSON(
                "{% url 'ietf.group.views.group_stats_data' %}",
                function (data) {
                    $("#spinner").remove();
                    const font = getComputedStyle(document.body).getPropertyValue('--bs-body-font-family');
                    $(".chart")
                        .each(function (i, e) {
                            const which = e.id;

                            const chart = Highcharts.chart(e, {
                                chart: {
                                    height: "100%",
                                    style: { fontFamily: font }
                                },
                                title: { text: `${which == "docs" ? "Documents" : "Pages"} in group` },
                                credits: { enabled: false },
                                colors: ["transparent"].concat(Highcharts.getOptions().colors),
                                series: [{
                                    type: "sunburst",
                                    data: [],
                                    allowDrillToNode: true,
                                    levels: [{
                                            level: 2,
                                            colorByPoint: true
                                        },
                                        {
                                            level: 3,
                                            colorVariation: {
                                                key: "brightness",
                                                to: 0.5
                                            }
                                        }
                                    ]
                                }],
                            });

                            const d = data.map((d) => {
                                    return {
                                        value: d[which],
                                        id: d.id,
                                        parent: d.parent,
                                    };
                                })
                                .sort((a, b) => {
                                    if (a.parent != b.parent) {
                                        if (a.parent < b.parent) {
                                            return -1;
                                        }
                                        if (a.parent > b.parent) {
                                            return 1;
                                        }
                                    } else if (a.parent == "ietf") {
                                        if (a.id < b.id) {
                                            return 1;
                                        }
                                        if (a.id > b.id) {
                                            return -1;
                                        }
                                        return 0;
                                    }
                                    return b.value - a.value;
                                });
                            chart.series[0].setData(d);
                    });
                });
        });
    </script>
{% endblock %}